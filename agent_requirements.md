# Project Requirements: Conversational AI Agent with Web Search

## 1. Introduction

This document outlines the requirements for a Python-based conversational AI agent (`agent.py`). The agent will leverage the Google Gemini large language model and the Brave Search API to provide informative and up-to-date responses to user queries via a command-line interface.

## 2. Goals

*   Develop a single-script Python application (`agent.py`) that functions as a conversational AI agent.
*   Integrate Google's Gemini 2.5 Pro Preview (or the latest available high-performance Gemini model) for natural language generation.
*   Incorporate Brave Search API for real-time web information retrieval.
*   Provide a simple command-line interface for user interaction.
*   Securely manage API keys using environment variables.

## 3. Functional Requirements

*   **Command-Line Interface (CLI):**
    *   The script must provide a continuous loop that prompts the user for input.
    *   It should accept user queries as text input.
    *   It must display the AI-generated responses back to the user in the console.
    *   The loop should continue until explicitly terminated (e.g., user types "exit" or uses CTRL+C).
*   **Query Analysis:**
    *   The agent must analyze the user's query to determine if external, real-time information is likely required for an accurate response.
    *   This determination logic should be implemented within the agent (e.g., based on keywords, query structure, or a preliminary check with the LLM).
*   **Web Search Integration (Conditional):**
    *   If web search is deemed necessary:
        *   The agent must formulate an appropriate search query based on the user's original input.
        *   It must execute a web search using the Brave Search API.
        *   It must process the search results (e.g., snippets, links) to extract relevant information.
        *   The extracted information should be summarized or selected concisely.
*   **LLM Interaction:**
    *   The agent must construct a prompt for the Google Gemini model.
    *   If a web search was performed, the prompt must include the original user query and the summarized/selected information from the search results.
    *   If no web search was performed, the prompt should primarily consist of the user's query.
    *   The agent must call the Google AI API to generate a response based on the constructed prompt.
*   **Response Generation:**
    *   The final response generated by the Gemini model must be presented to the user via the CLI.

## 4. Technical Requirements

*   **Language:** Python 3.x
*   **Core Libraries:**
    *   `google-generativeai`: For interacting with the Google Gemini API.
    *   `requests`: For making HTTP requests to the Brave Search API.
    *   `python-dotenv`: For loading environment variables from a `.env` file.
    *   `os`: For accessing environment variables.
*   **API Keys:**
    *   Google AI API Key (`GOOGLE_API_KEY`) must be required.
    *   Brave Search API Key (`BRAVE_SEARCH_API_KEY`) must be required.
    *   Keys must be loaded securely from environment variables (e.g., via a `.env` file and `python-dotenv`). They should not be hardcoded in the script.
*   **File Structure:** The entire implementation must reside within a single Python file named `agent.py`.
*   **Dependency Management:** This project requires `uv` for managing Python dependencies. `uv` is an extremely fast Python package installer and resolver ([https://github.com/astral-sh/uv](https://github.com/astral-sh/uv)).
    *   Ensure `uv` is installed and available in your environment.
    *   Create and activate a virtual environment (e.g., `uv venv .venv && source .venv/bin/activate` on Linux/macOS or `uv venv .venv ; .\.venv\Scripts\activate` on Windows).
    *   Install required packages into the activated virtual environment: `uv pip install google-generativeai requests python-dotenv`.

## 5. Non-Functional Requirements

*   **Error Handling:** Implement basic error handling for:
    *   API call failures (Google AI and Brave Search).
    *   Network connectivity issues.
    *   Missing environment variables (API keys, specifically `GOOGLE_API_KEY` and `BRAVE_SEARCH_API_KEY`).
    *   Informative error messages should be displayed to the user.
*   **Code Clarity:** The code must be well-commented, explaining the logic of different sections (e.g., CLI loop, query analysis, API calls, result processing).
*   **Security:** API keys must be handled securely via environment variables.

## 6. Exclusions

*   Complex state management or conversation history beyond the current query-response cycle.
*   Graphical User Interface (GUI).
*   Advanced result processing beyond basic summarization/selection.
*   User authentication or profiles.